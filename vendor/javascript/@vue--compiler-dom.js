import{registerRuntimeHelpers as e,isBuiltInType as t,createSimpleExpression as o,createCompilerError as r,createObjectProperty as n,getConstantType as s,createCallExpression as i,TO_DISPLAY_STRING as c,transformModel as l,findProp as p,hasDynamicKeyVBind as a,checkCompatEnabled as u,isStaticExp as d,createCompoundExpression as m,transformOn as f,noopDirectiveTransform as h,baseCompile as v,baseParse as E}from"@vue/compiler-core";export*from"@vue/compiler-core";import{makeMap as y,isVoidTag as g,isHTMLTag as M,isSVGTag as O,parseStringStyle as N,capitalize as D,extend as x}from"@vue/shared";const C=Symbol("production"!==process.env.NODE_ENV?"vModelRadio":"");const b=Symbol("production"!==process.env.NODE_ENV?"vModelCheckbox":"");const T=Symbol("production"!==process.env.NODE_ENV?"vModelText":"");const k=Symbol("production"!==process.env.NODE_ENV?"vModelSelect":"");const V=Symbol("production"!==process.env.NODE_ENV?"vModelDynamic":"");const S=Symbol("production"!==process.env.NODE_ENV?"vOnModifiersGuard":"");const _=Symbol("production"!==process.env.NODE_ENV?"vOnKeysGuard":"");const w=Symbol("production"!==process.env.NODE_ENV?"vShow":"");const H=Symbol("production"!==process.env.NODE_ENV?"Transition":"");const $=Symbol("production"!==process.env.NODE_ENV?"TransitionGroup":"");e({[C]:"vModelRadio",[b]:"vModelCheckbox",[T]:"vModelText",[k]:"vModelSelect",[V]:"vModelDynamic",[S]:"withModifiers",[_]:"withKeys",[w]:"vShow",[H]:"Transition",[$]:"TransitionGroup"});let G;function decodeHtmlBrowser(e,t=false){G||(G=document.createElement("div"));if(t){G.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`;return G.children[0].getAttribute("foo")}G.innerHTML=e;return G.textContent}const I=y("style,iframe,script,noscript",true);const L={isVoidTag:g,isNativeTag:e=>M(e)||O(e),isPreTag:e=>"pre"===e,decodeEntities:decodeHtmlBrowser,isBuiltInComponent:e=>t(e,"Transition")?H:t(e,"TransitionGroup")?$:void 0,getNamespace(e,t){let o=t?t.ns:0;if(t&&2===o)if("annotation-xml"===t.tag){if("svg"===e)return 1;t.props.some((e=>6===e.type&&"encoding"===e.name&&null!=e.value&&("text/html"===e.value.content||"application/xhtml+xml"===e.value.content)))&&(o=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&"mglyph"!==e&&"malignmark"!==e&&(o=0);else t&&1===o&&("foreignObject"!==t.tag&&"desc"!==t.tag&&"title"!==t.tag||(o=0));if(0===o){if("svg"===e)return 1;if("math"===e)return 2}return o},getTextMode({tag:e,ns:t}){if(0===t){if("textarea"===e||"title"===e)return 1;if(I(e))return 2}return 0}};const transformStyle=e=>{1===e.type&&e.props.forEach(((t,r)=>{6===t.type&&"style"===t.name&&t.value&&(e.props[r]={type:7,name:"bind",arg:o("style",true,t.loc),exp:parseInlineCSS(t.value.content,t.loc),modifiers:[],loc:t.loc})}))};const parseInlineCSS=(e,t)=>{const r=N(e);return o(JSON.stringify(r),false,t,3)};function createDOMCompilerError(e,t){return r(e,t,"production"!==process.env.NODE_ENV||false?R:void 0)}const R={51:"v-html is missing expression.",52:"v-html will override element children.",53:"v-text is missing expression.",54:"v-text will override element children.",55:"v-model can only be used on <input>, <textarea> and <select> elements.",56:"v-model argument is not supported on plain elements.",57:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",58:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",59:"v-show is missing expression.",60:"<Transition> expects exactly one child element or component.",61:"Tags with side effect (<script> and <style>) are ignored in client component templates."};const transformVHtml=(e,t,r)=>{const{exp:s,loc:i}=e;s||r.onError(createDOMCompilerError(51,i));if(t.children.length){r.onError(createDOMCompilerError(52,i));t.children.length=0}return{props:[n(o("innerHTML",true,i),s||o("",true))]}};const transformVText=(e,t,r)=>{const{exp:l,loc:p}=e;l||r.onError(createDOMCompilerError(53,p));if(t.children.length){r.onError(createDOMCompilerError(54,p));t.children.length=0}return{props:[n(o("textContent",true),l?s(l,r)>0?l:i(r.helperString(c),[l],p):o("",true))]}};const transformModel=(e,t,o)=>{const r=l(e,t,o);if(!r.props.length||1===t.tagType)return r;e.arg&&o.onError(createDOMCompilerError(56,e.arg.loc));function checkDuplicatedValue(){const e=p(t,"value");e&&o.onError(createDOMCompilerError(58,e.loc))}const{tag:n}=t;const s=o.isCustomElement(n);if("input"===n||"textarea"===n||"select"===n||s){let i=T;let c=false;if("input"===n||s){const r=p(t,"type");if(r){if(7===r.type)i=V;else if(r.value)switch(r.value.content){case"radio":i=C;break;case"checkbox":i=b;break;case"file":c=true;o.onError(createDOMCompilerError(57,e.loc));break;default:"production"!==process.env.NODE_ENV&&checkDuplicatedValue();break}}else a(t)?i=V:"production"!==process.env.NODE_ENV&&checkDuplicatedValue()}else"select"===n?i=k:"production"!==process.env.NODE_ENV&&checkDuplicatedValue();c||(r.needRuntime=o.helper(i))}else o.onError(createDOMCompilerError(55,e.loc));r.props=r.props.filter((e=>!(4===e.key.type&&"modelValue"===e.key.content)));return r};const B=y("passive,once,capture");const K=y("stop,prevent,self,ctrl,shift,alt,meta,exact,middle");const J=y("left,right");const j=y("onkeyup,onkeydown,onkeypress",true);const resolveModifiers=(e,t,o,r)=>{const n=[];const s=[];const i=[];for(let c=0;c<t.length;c++){const l=t[c];if("native"===l&&u("COMPILER_V_ON_NATIVE",o,r))i.push(l);else if(B(l))i.push(l);else if(J(l))if(d(e))j(e.content)?n.push(l):s.push(l);else{n.push(l);s.push(l)}else K(l)?s.push(l):n.push(l)}return{keyModifiers:n,nonKeyModifiers:s,eventOptionModifiers:i}};const transformClick=(e,t)=>{const r=d(e)&&"onclick"===e.content.toLowerCase();return r?o(t,true):4!==e.type?m(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e};const transformOn=(e,t,r)=>f(e,t,r,(t=>{const{modifiers:s}=e;if(!s.length)return t;let{key:c,value:l}=t.props[0];const{keyModifiers:p,nonKeyModifiers:a,eventOptionModifiers:u}=resolveModifiers(c,s,r,e.loc);a.includes("right")&&(c=transformClick(c,"onContextmenu"));a.includes("middle")&&(c=transformClick(c,"onMouseup"));a.length&&(l=i(r.helper(S),[l,JSON.stringify(a)]));!p.length||d(c)&&!j(c.content)||(l=i(r.helper(_),[l,JSON.stringify(p)]));if(u.length){const e=u.map(D).join("");c=d(c)?o(`${c.content}${e}`,true):m(["(",c,`) + "${e}"`])}return{props:[n(c,l)]}}));const transformShow=(e,t,o)=>{const{exp:r,loc:n}=e;r||o.onError(createDOMCompilerError(59,n));return{props:[],needRuntime:o.helper(w)}};const transformTransition=(e,t)=>{if(1===e.type&&1===e.tagType){const o=t.isBuiltInComponent(e.tag);if(o===H)return()=>{if(!e.children.length)return;hasMultipleChildren(e)&&t.onError(createDOMCompilerError(60,{start:e.children[0].loc.start,end:e.children[e.children.length-1].loc.end,source:""}));const o=e.children[0];if(1===o.type)for(const t of o.props)7===t.type&&"show"===t.name&&e.props.push({type:6,name:"persisted",value:void 0,loc:e.loc})}}};function hasMultipleChildren(e){const t=e.children=e.children.filter((e=>3!==e.type&&!(2===e.type&&!e.content.trim())));const o=t[0];return 1!==t.length||11===o.type||9===o.type&&o.branches.some(hasMultipleChildren)}const ignoreSideEffectTags=(e,t)=>{if(1===e.type&&0===e.tagType&&("script"===e.tag||"style"===e.tag)){t.onError(createDOMCompilerError(61,e.loc));t.removeNode()}};const A=[transformStyle,..."production"!==process.env.NODE_ENV?[transformTransition]:[]];const P={cloak:h,html:transformVHtml,text:transformVText,model:transformModel,on:transformOn,show:transformShow};function compile(e,t={}){return v(e,x({},L,t,{nodeTransforms:[ignoreSideEffectTags,...A,...t.nodeTransforms||[]],directiveTransforms:x({},P,t.directiveTransforms||{}),transformHoist:null}))}function parse(e,t={}){return E(e,x({},L,t))}export{P as DOMDirectiveTransforms,A as DOMNodeTransforms,H as TRANSITION,$ as TRANSITION_GROUP,b as V_MODEL_CHECKBOX,V as V_MODEL_DYNAMIC,C as V_MODEL_RADIO,k as V_MODEL_SELECT,T as V_MODEL_TEXT,_ as V_ON_WITH_KEYS,S as V_ON_WITH_MODIFIERS,w as V_SHOW,compile,createDOMCompilerError,parse,L as parserOptions,transformStyle};

